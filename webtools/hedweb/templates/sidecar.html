{% extends "layout.html" %}
{% from "json-input.html" import create_json_input %}
{% from "schema-pulldown.html" import create_schema_pulldown %}

{% block content %}

    <form id="sidecar_form" method="POST" enctype="multipart/form-data">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>

        <h2>Process BIDS-style JSON sidecar</h2>
        <p>
            <i>Pick an action.<br/>
                Upload a BIDS-style JSON events metadata file.<br/>
                Select a HED schema.<br/>
                Press Process.<br/>
                You will see a downloadable results file and/or a status message.
            </i>
        </p>
        <h3>Pick an action: </h3>

        <div class="form-group">
            <input class="radio-btn" type="radio" name="command_option"
                   id="command_to_long" value="command_to_long"
                   aria-label="Select this button to convert to long form">
            <label class="secondary-label">Convert to long</label>
        </div>

        <div class="form-group">
            <input class="radio-btn" type="radio" name="command_option"
                   id="command_to_short" value="command_to_short"
                   aria-label="Select this button to convert to short form">
            <label class="secondary-label">Convert to short</label>
        </div>

        <div class="form-group">
            <input class="radio-btn" type="radio" name="command_option" checked
                   id="command_validate" value="command_validate"
                   aria-label="Select this button to validate" aria-checked="true">
            <label class="secondary-label">Validate</label> &nbsp
            (<input type="checkbox" name="check_for_warnings" id="check_for_warnings" checked>
            <label for="expand_defs">Check for warnings)</label>
        </div>
        {{ create_json_input() }}
        {{ create_schema_pulldown() }}

        <div class="form-group">
            <button id="sidecar_submit" type="button">Process</button>
            <p class="flash" id="sidecar_submit_flash"></p>
        </div>

    </form>
    <script type="module">
        {%  include 'js/form-helpers.js' %}
        {%  include 'js/json-input.js' %}
        {%  include 'js/schema-pulldown.js' %}
        {%  include 'js/sidecar-form.js' %}
    </script>
{% endblock %}